  {% load staticfiles %}

  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <a class="navbar-brand" href="#"><img src="{% static "ndv/img/ocp_thumb.png" %}" /></a>
        <a class="navbar-brand" href="#">NeuroDataViz</a>
      </div>
      <form id="navigate" class="navbar-form navbar-left" role="search" action="">
        <div class="form-group">
          <input type="text" id="x" size="5" class="form-control" placeholder="x" aria-describedby="xlabel">
        </div>
        <div class="form-group">
          <input type="text" id="y" size="5" class="form-control" placeholder="y" aria-describedby="ylabel">
        </div>
        <div class="form-group">
          <input type="text" id="z" size="5" class="form-control" placeholder="z" aria-describedby="zlabel">
        </div>
        {% if timeseries == True %}
        <div class="form-group">
          <label for="timestep"><i class="fa fa-clock-o fa-lg fa-inverse"></i></label>
          <input type="text" id="timestep" size="5" class="form-control" placeholder="time" aria-describedby="timestep">
        </div>
        {% endif %}
        <button type="submit" class="btn btn-default">Go</button>
      </form>
      <ul class="nav navbar-nav navbar-left">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Query<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="#" id="query_none"><i class="fa fa-check" id="query_none_check"></i><span style="padding-left: 10px;">None</span></a></li>
            {% for layer in layers %}
            {% if layer.layertype == 'annotation' %}
            <li><a href="#" id="query_{{ layer.token }}_{{ layer.channel }}"><i class="fa fa-check" style="visibility: hidden;" id="query_{{ layer.token }}_{{ layer.channel }}_check"></i><span style="padding-left: 10px;">{{ layer.token }} / {{ layer.channel }}</span></a></li>
            {% endif %}
            {% endfor %}
          </ul>
        </li>

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Markers<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="#" id="addmarkercenter">Add Marker (to current center)</a></li>
            <li><a href="#" id="addmarkermouse">Add Marker (with mouse click)</a></li>
            <li><a href="#" id="clearmarkers">Clear All Markers</a></li>
          </ul>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <ul class="nav navbar-nav">
          <li><a href="#" id="databutton">Data</a></li>
        </ul>
        {% if user.is_authenticated %}
        <ul id="managelink" class="nav navbar-nav">
        {% else %}
        <ul id="managelink" class="nav navbar-nav" style="display:none;">
        {% endif %}
          <li><a href="#" id="managebutton">Manage</a></li>
        </ul>

        {% if user.is_authenticated %}
        <ul id="loginlink" class="nav navbar-nav" style="display:none;">
        {% else %}
        <ul id="loginlink" class="nav navbar-nav">
        {% endif %}
          <li><a href="#" data-toggle="modal" data-target="#login">Login</a></li>
        </ul>

        {% if user.is_authenticated %}
        <ul id="logoutlink" class="nav navbar-nav">
        {% else %}
        <ul id="logoutlink" class="nav navbar-nav" style="display:none;">
        {% endif %}
          <li><a href="#" id="logoutbutton">Logout</a></li>
        </ul>

        <li><a href="#" data-toggle="modal" data-target="#help">Help</a></li>
      </ul>
    </div>
  </nav>

  <script>
    // process logout form
    $(function () {
      $( '#logoutbutton' ).on('click', function () {
        $.ajax({
          url: '{% url "logout" %}',
          success: function(response) {
            $( "#loginlink" ).show()
            $( "#managelink" ).hide()
            $( "#logoutlink" ).hide()
          },
        })
      });
    });

  </script>

  {# remote modal #}
  <div class="modal fade" id="remoteModal" tabindex="-1" role="dialog" aria-labelledby="remoteModal" aria-hidden="true">
  </div>
  <script>
    $(function () {
      // load manage modal
      $( '#managebutton' ).on('click', function () {
        $( "#remoteModal" ).load("{% url 'viewProjects' %}");
        $( "#remoteModal" ).modal('show');
      });

      // load data modal
      $( '#databutton' ).on('click', function () {
        $( "#remoteModal" ).load("{% url 'dataviewsPublic' %}");
        $( "#remoteModal" ).modal('show');
      });
    });
    function loadManageModal() {
    };
  </script>
  {# end remote modal #}
